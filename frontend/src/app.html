<!doctype html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <link rel="icon" href="%sveltekit.assets%/favicon.png" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="description" content="Application de recettes de cuisine" />

        <!-- Optimisation des connexions -->
        <link rel="preconnect" href="https://picsum.photos" crossorigin />
        <link rel="dns-prefetch" href="https://picsum.photos" />

        <!-- Préchargement des ressources critiques -->
        <link rel="preload" as="image" href="https://picsum.photos/seed/picsum/400/300" fetchpriority="high" />

        <!-- Métadonnées de performances -->
        <meta http-equiv="Cache-Control" content="max-age=31536000" />
        <meta http-equiv="X-Content-Type-Options" content="nosniff" />

        <!-- Stratégie de chargement des ressources -->
        <script>
            // Préchargement des images LCP après le chargement initial
            window.addEventListener('load', () => {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach((entry) => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            if (img.dataset.src) {
                                img.src = img.dataset.src;
                                img.removeAttribute('data-src');
                            }
                            observer.unobserve(img);
                        }
                    });
                });

                document.querySelectorAll('img[data-src]').forEach((img) => {
                    observer.observe(img);
                });
            });
        </script>

        <title>Recettes App</title>
        %sveltekit.head%
    </head>
    <body data-sveltekit-preload-data="hover">
        <div style="display: contents">%sveltekit.body%</div>
    </body>
</html>
